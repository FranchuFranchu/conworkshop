<% self.class.include Rails.application.routes.url_helpers %>

window.update_tz = ->
  $.ajax('<%= user_update_tz_path %>',
    method: 'PATCH'
    dataType: 'json'
    data: { tz: moment.tz.guess() }
    success: (data) ->
      if data.success
        console.info("Successfully changed timezone (#{data.success})")
      else
        console.warn("Timezone change failed: #{data.err}")
    error: (jqxhr, status, err) ->
      console.error("Error in ajax request for timezone change (#{status}): #{err}")
  )
